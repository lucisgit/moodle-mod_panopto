define(["jquery","core/ajax","core/notification","core/str","core/templates","core/modal_factory"],function(i,a,r,p,c,d){return{init:function(o,t){!function t(e,n){a.call([{methodname:"mod_panopto_get_auth",args:{contextid:e,panoptoid:n}}])[0].done(function(o){o&&(i("#panopto_progress_bar").val(100),window.location.replace(o)),setTimeout(function(){t(e,n)},1e3)}).fail(r.exception)}(o,t);var e={id:"panopto_progress",width:350},n=i("#panopto_info");p.get_string("preparing","mod_panopto").done(function(o){d.create({title:o,body:c.render("mod_panopto/progress",e,""),type:d.types.DEFAULT,large:!1},n).done(function(o){o.getRoot().find(".modal-dialog").css({width:"400px","margin-top":"20rem"}),n.trigger("click")}).fail(r.exception)}).fail(r.exception)}}});